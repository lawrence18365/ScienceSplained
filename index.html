<!DOCTYPE html>
<html lang="en">
<head>
    <base href="https://lawrence18365.github.io/" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScienceSplained: Breaking Down Research studies for an enjoyable weekly read</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #00FFA3;
            --secondary-color: #0D0D0D;
            --accent-color: #FF3366;
            --text-color: #FFFFFF;
            --header-height: 80px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        header {
            background-color: rgba(13, 13, 13, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--header-height);
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 600;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--primary-color);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .nav-links a:hover::after {
            transform: scaleX(1);
        }

        .mobile-menu-toggle {
            display: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
        }

        main {
            margin-top: var(--header-height);
            padding: 40px 0;
        }

        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 80px 0;
            background: linear-gradient(135deg, var(--secondary-color), #1A1A1A);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .hero-content {
            flex: 1;
            padding: 0 40px;
            z-index: 1;
            text-align: center;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            line-height: 1.2;
            color: var(--primary-color);
        }

        .hero p {
            font-size: 18px;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        .hero-image {
            flex: 1;
            position: relative;
            height: 400px;
            overflow: hidden;
            border-radius: 20px;
        }

        .hero-image img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }

        .signup-form {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .signup-form input[type="email"] {
            padding: 12px 20px;
            width: 300px;
            border: none;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border-radius: 30px 0 0 30px;
            font-size: 16px;
            outline: none;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-color);
            color: var(--text-color);
            padding: 12px 30px;
            border: none;
            border-radius: 0 30px 30px 0;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 16px;
        }

        .cta-button:hover {
            background-color: #FF4D7F;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 51, 102, 0.3);
        }

        .featured-articles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 60px;
        }

        .article-card {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .article-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .article-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            opacity: 0.8;
        }

        .article-content {
            padding: 20px;
        }

        .article-title {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .article-excerpt {
            font-size: 14px;
            color: var(--text-color);
            margin-bottom: 15px;
        }

        .read-more {
            display: inline-block;
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .read-more::after {
            content: '→';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .read-more:hover::after {
            opacity: 1;
            right: -25px;
        }

        .about-section {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 80px 0;
            margin-top: 60px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .about-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .about-text {
            flex: 1;
            padding-right: 40px;
        }

        .about-image {
            flex: 1;
            border-radius: 20px;
            overflow: hidden;
        }

        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            opacity: 0.8;
        }

        footer {
            background-color: var(--secondary-color);
            color: var(--text-color);
            text-align: center;
            padding: 20px 0;
            margin-top: 60px;
        }

        @media (max-width: 768px) {
            .hero {
                flex-direction: column;
                padding: 60px 0;
            }

            .hero-content, .hero-image {
                flex: none;
                width: 100%;
            }

            .hero-image {
                height: 300px;
                margin-top: 40px;
            }

            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: var(--header-height);
                left: 0;
                width: 100%;
                background-color: var(--secondary-color);
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links li {
                margin: 0;
                text-align: center;
            }

            .nav-links a {
                display: block;
                padding: 10px;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .signup-form {
                flex-direction: column;
                align-items: center;
            }

            .signup-form input[type="email"] {
                width: 100%;
                max-width: 300px;
                border-radius: 30px;
                margin-bottom: 10px;
            }

            .cta-button {
                border-radius: 30px;
            }

            .about-content {
                flex-direction: column;
            }

            .about-text {
                padding-right: 0;
                margin-bottom: 40px;
            }
        }

        /* Chatbot styles */
       .chat-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    z-index: 1000;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.chat-widget.open {
    width: 350px;
    height: 500px;
    border-radius: 10px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
}

.chat-toggle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: var(--secondary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
}

.chat-widget.open .chat-toggle {
    display: none;
}

.chat-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-icon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.chat-content {
    display: none;
    flex-direction: column;
    height: 100%;
    background-color: var(--secondary-color);
    border-radius: 10px;
    overflow: hidden;
}

.chat-widget.open .chat-content {
    display: flex;
}

.chat-header {
    background-color: var(--primary-color);
    color: var(--secondary-color);
    padding: 15px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close-chat {
    cursor: pointer;
    font-size: 20px;
}

.chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
    background-color: var(--secondary-color);
}

.chat-input {
    display: flex;
    padding: 10px;
    background-color: var(--secondary-color);
    border-top: 1px solid #e0e0e0;
}

.chat-input input {
    flex-grow: 1;
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 20px;
    font-size: 14px;
    outline: none;
    transition: border-color 0.3s ease;
}

.chat-input input:focus {
    border-color: var(--primary-color);
}

.chat-input button {
    margin-left: 10px;
    padding: 10px 15px;
    background-color: var(--primary-color);
    color: var(--secondary-color);
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.chat-input button:hover {
    background-color: #00CC82;
}

.message {
    margin-bottom: 10px;
    padding: 10px 15px;
    border-radius: 18px;
    max-width: 80%;
    word-wrap: break-word;
    animation: fadeInUp 0.3s ease-out;
    position: relative;
}

.user-message {
    background-color: var(--primary-color);
    color: var(--secondary-color);
    align-self: flex-end;
    margin-left: auto;
}

.bot-message {
    background-color: var(--accent-color);
    color: var(--text-color);
    align-self: flex-start;
}

.typing-indicator {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.typing-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #999;
    margin-right: 3px;
    animation: typingAnimation 1.5s infinite;
}

.typing-dot:nth-child(2) {
    animation-delay: 0.5s;
}

.typing-dot:nth-child(3) {
    animation-delay: 1s;
}

@keyframes typingAnimation {
    0% { opacity: 0.3; transform: translateY(0); }
    50% { opacity: 1; transform: translateY(-5px); }
    100% { opacity: 0.3; transform: translateY(0); }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message-time {
    font-size: 10px;
    position: absolute;
    bottom: -15px;
    right: 5px;
    color: #999;
}

.user-message .message-time {
    color: rgba(13, 13, 13, 0.7);
}

.chat-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
    padding: 0 10px 10px;
}

.suggestion-chip {
    background-color: var(--primary-color);
    color: var(--secondary-color);
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 12px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.suggestion-chip:hover {
    background-color: #00CC82;
}

/* Ensure the chatbot fits on smaller screens */
@media (max-width: 768px) {
    .chat-widget.open {
        width: 90%;
        height: 80%;
        max-height: 500px;
        bottom: 10px;
        right: 5%;
        left: 5%;
    }
}
</style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo">ScienceSplained</a>
                <ul class="nav-links">
                    <li><a href="#featured">Featured</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#subscribe">Subscribe</a></li>
                </ul>
                <div class="mobile-menu-toggle">☰</div>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="hero-content container">
                <h1>Decode the Complexity of Science</h1>
                <p>Transforming intricate research into bite-sized, mind-blowing insights for the curious</p>
                <form id="signup-form" class="signup-form" method="POST" action="https://t722mto9uj.execute-api.ap-southeast-2.amazonaws.com/prod">
                    <input type="email" name="email" placeholder="Your email address" required>
                    <button type="submit" class="cta-button">Join the Discovery</button>
                </form>
                <div id="thank-you-message" style="display: none;">
                    <h2>Thank You for Subscribing!</h2>
                    <p>You're now part of our science-loving community. Get ready for mind-blowing insights delivered straight to your inbox!</p>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Scientific research visualization">
            </div>
        </section>

        <section id="featured" class="container">
            <h2>Latest Mind-Benders</h2>
            <div class="featured-articles">
                <article class="article-card">
                    <img src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Quantum computing visualization" class="article-image">
                    <div class="article-content">
                        <h3 class="article-title">Quantum Leap: The Future of Computing</h3>
                        <p class="article-excerpt">Dive into the mind-bending world of quantum computing and its potential to revolutionize technology.</p>
                        <a href="#" class="read-more">Explore the Quantum Realm</a>
                    </div>
                </article>
                <article class="article-card">
                    <img src="https://images.unsplash.com/photo-1559757175-5700dde675bc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1171&q=80" alt="Brain visualization" class="article-image">
                    <div class="article-content">
                        <h3 class="article-title">Rewiring Your Brain: The Science of Habits</h3>
                        <p class="article-excerpt">Uncover the neurological secrets behind habit formation and learn how to hack your brain for success.</p>
                        <a href="#" class="read-more">Upgrade Your Mind</a>
                    </div>
                </article>
                <article class="article-card">
                    <img src="https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Climate change effects" class="article-image">
                    <div class="article-content">
                        <h3 class="article-title">Climate Crisis: The Gen Z Perspective</h3>
                        <p class="article-excerpt">Explore cutting-edge climate research and discover how your generation can lead the charge for change.</p>
                        <a href="#" class="read-more">Join the Green Revolution</a>
                    </div>
                </article>
            </div>
        </section>

        <section id="about" class="about-section">
            <div class="container about-content">
                <div class="about-text">
                    <h2>About ScienceSplained</h2>
                    <p>We're not your average science nerds. We're a squad of young, passionate researchers and communicators on a mission to make science cool again. Our goal? To break down the walls between complex academic jargon and everyday understanding, serving up the hottest scientific discoveries in a format that's easy to digest and impossible to ignore.</p>
                    <p>Whether you're a science enthusiast or just curious about the world around you, ScienceSplained is your ticket to the frontiers of human knowledge. Let's explore the universe together, one mind-blowing fact at a time.</p>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="ScienceSplained team">
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 ScienceSplained. Pushing the boundaries of knowledge, one explanation at a time.</p>
        </div>
    </footer>

    <div class="chat-widget" id="chat-widget">
    <div class="chat-toggle" id="chat-toggle">
        <div class="chat-icon">
            <img src="/placeholder.svg?height=40&width=40" alt="Chat Icon">
        </div>
    </div>
    <div class="chat-content">
        <div class="chat-header">
            <span>ScienceSplained AI Assistant</span>
            <span class="close-chat" id="close-chat">&times;</span>
        </div>
        <div class="chat-messages" id="chat-messages"></div>
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
        </div>
        <div class="chat-suggestions" id="chat-suggestions"></div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Type your message...">
            <button id="send-button">Send</button>
        </div>
    </div>
</div>

    <div class="notification" id="notification"></div>

 <script>
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const nav = document.querySelector('header nav');
        
        mobileMenuToggle.addEventListener('click', function() {
            nav.querySelector('.nav-links').classList.toggle('active');
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                // Close mobile menu after clicking a link
                nav.querySelector('.nav-links').classList.remove('active');
            });
        });

        // Form submission
        var form = document.getElementById('signup-form');
        var submitButton = form.querySelector('button[type="submit"]');
        var thankYouMessage = document.getElementById('thank-you-message');
        var errorMessage = document.createElement('div');
        errorMessage.id = 'error-message';
        errorMessage.style.display = 'none';
        errorMessage.style.color = 'red';
        form.parentNode.insertBefore(errorMessage, form.nextSibling);
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Disable submit button to prevent double submission
            submitButton.disabled = true;
            
            var formData = new FormData(form);
            fetch('https://t722mto9uj.execute-api.ap-southeast-2.amazonaws.com/prod', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.result === 'success') {
                    form.style.display = 'none';
                    thankYouMessage.textContent = data.message;
                    thankYouMessage.style.display = 'block';
                } else {
                    errorMessage.textContent = data.message;
                    errorMessage.style.display = 'block';
                    setTimeout(() => {
                        errorMessage.style.display = 'none';
                    }, 3000);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                errorMessage.textContent = 'An error occurred. Please try again later.';
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            })
            .finally(() => {
                // Re-enable submit button
                submitButton.disabled = false;
            });
        });

        // Shrink header on scroll
        window.addEventListener('scroll', function() {
            if (window.scrollY > 100) {
                document.querySelector('header').style.height = '60px';
            } else {
                document.querySelector('header').style.height = '80px';
            }
        });

        // Animate elements on scroll
        const animateOnScroll = function() {
            const elements = document.querySelectorAll('.article-card, .about-content');
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementBottom = element.getBoundingClientRect().bottom;
                if (elementTop < window.innerHeight && elementBottom > 0) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        };
        window.addEventListener('scroll', animateOnScroll);
        animateOnScroll(); // Run once on load

        // Parallax effect for hero image
        window.addEventListener('scroll', function() {
            const heroImage = document.querySelector('.hero-image img');
            const scrollPosition = window.pageYOffset;
            heroImage.style.transform = `translate(-50%, -${50 + scrollPosition * 0.05}%)`;
        });

        // Typing effect for hero title
        const heroTitle = document.querySelector('.hero h1');
        const titleText = heroTitle.textContent;
        heroTitle.textContent = '';
        let i = 0;
        const typeWriter = function() {
            if (i < titleText.length) {
                heroTitle.textContent += titleText.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            }
        };
        typeWriter();

        // Interactive hover effect for article cards
        const articleCards = document.querySelectorAll('.article-card');
        articleCards.forEach(card => {
            card.addEventListener('mousemove', function(e) {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
        });

        // Chatbot functionality
        const chatWidget = document.getElementById('chat-widget');
        const chatToggle = document.getElementById('chat-toggle');
        const closeChat = document.getElementById('close-chat');
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const typingIndicator = document.getElementById('typing-indicator');
        const notification = document.getElementById('notification');
        const chatSuggestions = document.getElementById('chat-suggestions');

        let conversationHistory = [];

        function toggleChat() {
            chatWidget.classList.toggle('open');
            if (chatWidget.classList.contains('open')) {
                userInput.focus();
            }
        }

        chatToggle.addEventListener('click', toggleChat);
        closeChat.addEventListener('click', toggleChat);

        function addMessage(message, isUser) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(isUser ? 'user-message' : 'bot-message');
            messageElement.textContent = message;

            const timeElement = document.createElement('span');
            timeElement.classList.add('message-time');
            timeElement.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            messageElement.appendChild(timeElement);

            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            conversationHistory.push({
                role: isUser ? 'user' : 'assistant',
                content: message
            });
        }

        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }

        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.opacity = 1;
            setTimeout(() => {
                notification.style.opacity = 0;
            }, 3000);
        }

        function addSuggestions(suggestions) {
            chatSuggestions.innerHTML = '';
            suggestions.forEach(suggestion => {
                const chip = document.createElement('div');
                chip.classList.add('suggestion-chip');
                chip.textContent = suggestion;
                chip.addEventListener('click', () => {
                    userInput.value = suggestion;
                    sendMessage();
                });
                chatSuggestions.appendChild(chip);
            });
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                addMessage(message, true);
                userInput.value = '';
                showTypingIndicator();
                try {
                    const response = await fetch('https://t722mto9uj.execute-api.ap-southeast-2.amazonaws.com/prod', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ 
                            message,
                            conversationHistory 
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const text = await response.text();
                    let data;
                    try {
                        data = JSON.parse(text);
                    } catch (e) {
                        console.log('Response is not JSON, using as plain text');
                        data = { reply: text };
                    }

                    hideTypingIndicator();

                    if (data && (data.reply || data.Result)) {
                        const botReply = data.reply || data.Result;
                        addMessage(botReply, false);
                        showNotification('Message sent successfully', 'success');

                        // Add suggestions based on the bot's reply
                        const suggestions = generateSuggestions(botReply);
                        addSuggestions(suggestions);
                    } else {
                        console.log('Unexpected response structure:', data);
                        addMessage('Received a response, but it was in an unexpected format.', false);
                        showNotification('Error: Unexpected response format', 'error');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    hideTypingIndicator();
                    addMessage('Sorry, I couldn\'t process your request. Please try again.', false);
                    showNotification('Error: Couldn\'t process request', 'error');
                }
            }
        }

        function generateSuggestions(botReply) {
            // This is a simple example. You can implement more sophisticated suggestion generation.
            const keywords = ['quantum', 'brain', 'climate', 'research', 'science'];
            return keywords.filter(keyword => botReply.toLowerCase().includes(keyword))
                           .map(keyword => `Tell me more about ${keyword}`);
            }

            sendButton.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Initial message from the chatbot
            window.addEventListener('load', () => {
                setTimeout(() => {
                    addMessage("Hi there! Welcome to ScienceSplained. What scientific topic are you curious about today?", false);
                    addSuggestions(['Quantum computing', 'Neuroscience', 'Climate change', 'Latest research']);
                }, 1000);
            });
        });
    </script>
</body>
</html>
